def build_refactor_prompt(file_diff: str) -> str:
    return f"""
λ‹¤μμ€ SaaS λ°±μ—”λ“ μ‹μ¤ν…μ Pull Request diffμ…λ‹λ‹¤.

π― λ©ν‘: μλ―Έ μλ” λ¦¬ν©ν† λ§ μ¤‘μ‹¬μ κ°μ„  μ μ•μ„ μ κ³µν•©λ‹λ‹¤.

β—οΈμ¶λ ¥ ν•μ‹ μ΅°κ±΄:
- κ²°κ³Όλ” λ§ν¬λ‹¤μ΄ ν•μ‹μΌλ΅ μ‘μ„±
- κ° μ μ•μ€ λ¶λ¦Ώ ν¬μΈνΈλ΅ κµ¬μ„±
- ν•„μ” μ‹ μ½”λ“ λΈ”λ­μ„ ν•¨κ» μ‚¬μ©
- ν•­λ©λ³„ μ²΄ν¬λ¦¬μ¤νΈ κΈ°λ° (SRP μ„λ°, μμ™Έμ²λ¦¬ λ„λ½, λ΅κ·Έ λ„λ½ λ“± λ“±)
- λ‹¤μκ³Ό κ°™μ΄ μ΅°κ±΄ μ„¤μ •:
    - κ° ν•­λ©μ€ [O]/[X]λ΅ μ”μ•½
    - OμΌ κ²½μ°μ—λ§ μ„¤λ… ν¬ν•¨
    - XμΌ κ²½μ° ν•΄λ‹Ή ν•­λ© μμ²΄ μƒλµ
- μ‹¤λ¬΄μ μΈ λ¦¬ν©ν† λ§ μ μ•λ§ μ‘μ„±ν•κ³ , λ¶ν•„μ”ν• μ–ΈκΈ‰μ΄λ‚ μ¥ν™©ν• μ„¤λ…μ€ ν”Όν•΄μ£Όμ„Έμ”.

π“ μ°Έκ³  κΈ°μ¤€ (ν•΄λ‹Ήν•λ” ν•­λ©λ§ μ‘μ„±):
- λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ λ„λ¬΄ λ§μ€ Service β†’ λ©”μ„λ“ λ¶„λ¦¬, κ°μ²΄ λ¶„λ¦¬
- λ„λ©”μΈ κ°μ²΄κ°€ λ¬΄μλ―Έν•κ² μ»¨νΈλ΅¤λ¬μ— λ…Έμ¶λλ” κµ¬μ΅° β†’ μΊ΅μν™” μ λ„
- DDD κ·μΉ™ μ„λ° (λ„λ©”μΈ β†’ μΈν”„λΌ μμ΅΄ λ“±) μ—¬λ¶€
- νΈλμ­μ… λ²”μ„κ°€ λ„λ¬΄ λ„“κ±°λ‚ μ—¬λ¬ μ±…μ„μ„ ν¬ν•¨ν• κ²½μ°
- AOPλ΅ μ¶”μ¶ κ°€λ¥ν• κ΄€μ‹¬μ‚¬ λ¶„λ¦¬ μ—¬λ¶€
- μ ν‹Έ/ν—¬νΌ ν΄λμ¤κ°€ λ„λ¬΄ λΉ„λ€ν•΄μ΅λ”μ§€

π§ μ μ• ν•μ‹ (ν•΄λ‹Ήν•λ” κ²½μ°μ—λ§):
- λ¦¬ν©ν† λ§ ν¬μΈνΈ μ„¤λ…
- λ¦¬ν©ν† λ§ ν›„ κµ¬μ΅° μμ‹ (ν΄λμ¤/λ©”μ„λ“ λ“±)
- μ½”λ“ λ³€κ²½ μ‹ μ μμ‚¬ν•­

--- νμΌ λ³€κ²½ λ‚΄μ© ---
{file_diff}
"""
