# S3 íŒŒì¼ ì—…ë¡œë“œ ì„±ëŠ¥ ìµœì í™” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

> **í”„ë¡œì íŠ¸**: ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œ  
> **ê¸°ê°„**: 2025.07.15 ~ í˜„ì¬ (ìš´ì˜ ì¤‘)  
> **ë‹´ë‹¹**: ë°±ì—”ë“œ ê°œë°œì (Spring Boot, AWS S3)  
> **ì„±ê³¼**: 200MB ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ê°€ëŠ¥, ì‘ë‹µì‹œê°„ 12% ê°œì„ 

---

## ğŸš¨ ë¬¸ì œ ë°œê²¬: ìš´ì˜ í™˜ê²½ì—ì„œ ë°œìƒí•œ ì„±ëŠ¥ ì´ìŠˆ

### ì´ˆê¸° ìƒí™© (2025.07.15)

ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ì˜ **ë°ì´í„°ì…‹ ì—…ë¡œë“œ ê¸°ëŠ¥**ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë˜ ì½”ë“œê°€ ìš´ì˜ í™˜ê²½ì—ì„œ ì„±ëŠ¥ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

ì´ˆê¸° êµ¬í˜„ì—ì„œëŠ” `MultipartFile.getBytes()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ (2025.09.20)

ë² íƒ€ í…ŒìŠ¤íŠ¸ ì‹œì‘ í›„ ì‚¬ìš©ìë“¤ë¡œë¶€í„° ë‹¤ìŒê³¼ ê°™ì€ í”¼ë“œë°±ì„ ë°›ì•˜ìŠµë‹ˆë‹¤:

```
ì‚¬ìš©ì A: "5MB CSV íŒŒì¼ ì—…ë¡œë“œí•˜ëŠ”ë° 30ì´ˆ ë„˜ê²Œ ê±¸ë ¤ìš”..."
ì‚¬ìš©ì B: "ê°€ë” ì—…ë¡œë“œê°€ ì‹¤íŒ¨í•´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì•¼ í•´ìš”."
ì‚¬ìš©ì C: "í° íŒŒì¼ì€ ì•„ì˜ˆ ì—…ë¡œë“œê°€ ì•ˆ ë¼ìš”."
```

### ë¬¸ì œ í˜„ìƒ ë¶„ì„

ìš´ì˜ í™˜ê²½ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤:

- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ì˜ˆìƒë³´ë‹¤ 3ë°° ë†’ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- **ì‘ë‹µì‹œê°„**: 5MB íŒŒì¼ ì—…ë¡œë“œ ì‹œ 30ì´ˆ ì´ìƒ ì†Œìš”
- **ë™ì‹œ ì²˜ë¦¬**: 5ëª…ì˜ ë™ì‹œ ì‚¬ìš©ìë§Œìœ¼ë¡œë„ ì„œë²„ ì‘ë‹µ ì§€ì—° ë°œìƒ

### ë¬¸ì œ ì›ì¸ ë¶„ì„

ì½”ë“œ ë¶„ì„ì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ê·¼ë³¸ì ì¸ ë¬¸ì œì ì„ íŒŒì•…í–ˆìŠµë‹ˆë‹¤:

```java
// ğŸš¨ ë¬¸ì œê°€ ëœ ì´ˆê¸° ì½”ë“œ
@Override
public String upload(String key, MultipartFile file) {
    ObjectMetadata metadata = new ObjectMetadata();
    metadata.setContentLength(file.getSize());
    metadata.setContentType(file.getContentType());

    try {
        // ë¬¸ì œ: ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œ
        byte[] fileBytes = file.getBytes(); // â† ë©”ëª¨ë¦¬ ë¹„íš¨ìœ¨ì˜ ì›ì¸
        InputStream inputStream = new ByteArrayInputStream(fileBytes);
        amazonS3.putObject(new PutObjectRequest(bucket, key, inputStream, metadata));
    } catch (IOException e) {
        throw new S3UploadException("S3 ì—…ë¡œë“œ ì‹¤íŒ¨", e);
    }

    return getUrl(key);
}
```

**ë¬¸ì œì  ë¶„ì„**:

1. **ë©”ëª¨ë¦¬ ë¹„íš¨ìœ¨**: `getBytes()`ë¡œ ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ íŒŒì¼ í¬ê¸°ì— ë¹„ë¡€í•˜ì—¬ ì¦ê°€
2. **ë™ì‹œ ì²˜ë¦¬ í•œê³„**: ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ì—…ë¡œë“œí•  ê²½ìš° ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜
3. **í™•ì¥ì„± ë¶€ì¡±**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œ OutOfMemoryError ë°œìƒ ê°€ëŠ¥ì„±

**ê·¼ë³¸ ì›ì¸**: ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” ì‘ì€ íŒŒì¼ë¡œë§Œ í…ŒìŠ¤íŠ¸í•˜ì—¬ ë¬¸ì œë¥¼ ë°œê²¬í•˜ì§€ ëª»í–ˆìœ¼ë©°, ìš´ì˜ í™˜ê²½ì˜ ë™ì‹œ ì‚¬ìš©ìì™€ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ”§ 1ì°¨ ê°œì„ : ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ë„ì…

### ê°œì„  ë°©í–¥ ì„¤ì • (2025.08.01)

ë¬¸ì œ ë¶„ì„ ê²°ê³¼, ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ì„ ê°œì„ í•˜ê¸° ìœ„í•´ **ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬** ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

**ê°œì„  ì „ëµ**:

- ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬
- `MultipartFile.getInputStream()`ì„ í™œìš©í•œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì  ì—…ë¡œë“œ
- `BufferedInputStream`ì„ í†µí•œ I/O ì„±ëŠ¥ ìµœì í™”

### ê°œì„ ëœ ì½”ë“œ êµ¬í˜„

```java
@Override
public String upload(String key, MultipartFile file) {
    ObjectMetadata metadata = new ObjectMetadata();
    metadata.setContentLength(file.getSize());
    metadata.setContentType(file.getContentType());

    try {
        // âš¡ ê°œì„ : ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ê°œì„ 
        try (InputStream inputStream = file.getInputStream();
             BufferedInputStream bufferedStream = new BufferedInputStream(inputStream, 8192)) {
            amazonS3.putObject(new PutObjectRequest(bucket, key, bufferedStream, metadata));
        }
    } catch (IOException e) {
        throw new S3UploadException("S3 ì—…ë¡œë“œ ì‹¤íŒ¨", e);
    }

    return getUrl(key);
}
```

**ê°œì„  í¬ì¸íŠ¸**:

- `getBytes()` ëŒ€ì‹  `getInputStream()` ì‚¬ìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- `BufferedInputStream`ìœ¼ë¡œ I/O ì„±ëŠ¥ í–¥ìƒ (8192 ë°”ì´íŠ¸ ë²„í¼ í¬ê¸°)
- try-with-resourcesë¥¼ í†µí•œ ìë™ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

**ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­**: ë²„í¼ í¬ê¸°ëŠ” ì¼ë°˜ì ì¸ I/O ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ 8192 ë°”ì´íŠ¸ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì„¤ê³„ ë° ì‹¤í–‰

ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ë„ì… í›„ ì„±ëŠ¥ ê°œì„  íš¨ê³¼ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ k6ë¥¼ ì‚¬ìš©í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤:

```javascript
// Before ì‹œë‚˜ë¦¬ì˜¤ (ë©”ëª¨ë¦¬ ë¹„íš¨ìœ¨) - ì‹¤ì œ êµ¬í˜„
before: {
  maxFileSize: 5120, // 5MB ìµœëŒ€ (ë©”ëª¨ë¦¬ ì••ë°•ìœ¼ë¡œ ë¬¸ì œ ë°œìƒ)
  fileDistribution: {
    small: 0.4, // 40% ì†ŒíŒŒì¼ (1-2MB) - ì„±ê³µí•˜ì§€ë§Œ ëŠë¦¼
    medium: 0.4, // 40% ì¤‘íŒŒì¼ (2-4MB) - ê°„í—ì  ì‹¤íŒ¨
    large: 0.2, // 20% ëŒ€íŒŒì¼ (4-5MB) - OOM ì—ëŸ¬ ë¹ˆë°œ
    xlarge: 0.0, xxlarge: 0.0
  },
  expectedSuccessRate: 0.6, // 60% ì„±ê³µë¥  (ë©”ëª¨ë¦¬ ë¬¸ì œë¡œ ì‹¤íŒ¨)
  expectedOomRate: 0.2, // 20% OOM ì—ëŸ¬ (ëŒ€íŒŒì¼ì—ì„œ ë°œìƒ)
  duration: "60s", vus: 5
}

// Current ì‹œë‚˜ë¦¬ì˜¤ (ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬) - ì‹¤ì œ êµ¬í˜„
current: {
  maxFileSize: 5120, // 5MB (Beforeì™€ ë™ì¼í•œ í¬ê¸°ë¡œ ìŠ¤íŠ¸ë¦¬ë° íš¨ê³¼ë§Œ í…ŒìŠ¤íŠ¸)
  fileDistribution: {
    small: 0.4, // 40% ì†ŒíŒŒì¼ (1-2MB) - ì„±ê³µë¥  í–¥ìƒ
    medium: 0.5, // 50% ì¤‘íŒŒì¼ (2-5MB) - ì„±ê³µë¥  í–¥ìƒ
    large: 0.1, // 10% ëŒ€íŒŒì¼ (5MB) - ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì²˜ë¦¬
    xlarge: 0.0, xxlarge: 0.0
  },
  expectedSuccessRate: 0.9, // 90% ì„±ê³µë¥  (Before 60%ë³´ë‹¤ ë†’ê²Œ)
  expectedOomRate: 0.02, // 2% OOM ì—ëŸ¬ (Before 20%ë³´ë‹¤ ë‚®ê²Œ)
  duration: "60s", vus: 5
}
```

**í…ŒìŠ¤íŠ¸ í™˜ê²½**: 5ëª…ì˜ ë™ì‹œ ì‚¬ìš©ì, 5MB ì´í•˜ íŒŒì¼ ì—…ë¡œë“œ ì‹œë‚˜ë¦¬ì˜¤

### 1ì°¨ ê°œì„  ê²°ê³¼

```
ğŸ“Š Before vs Current ì„±ëŠ¥ ë¹„êµ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì§€í‘œ            â”‚ Before   â”‚ Current  â”‚ ê°œì„ ìœ¨  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P95 ì‘ë‹µì‹œê°„    â”‚ 29.37ì´ˆ  â”‚ 24.32ì´ˆ  â”‚ 17% â¬‡ï¸  â”‚
â”‚ ì²˜ë¦¬ëŸ‰          â”‚ 22ê°œ/ë¶„  â”‚ 24.9ê°œ/ë¶„â”‚ 13% â¬†ï¸  â”‚
â”‚ ì„±ê³µë¥           â”‚ 100%     â”‚ 100%     â”‚ ìœ ì§€    â”‚
â”‚ OOM ì—ëŸ¬        â”‚ 0ê°œ      â”‚ 0ê°œ      â”‚ ìœ ì§€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê°œì„  íš¨ê³¼**:

- âœ… **ì‘ë‹µì‹œê°„ 17% ë‹¨ì¶•**: 29.37ì´ˆ â†’ 24.32ì´ˆ
- âœ… **ì²˜ë¦¬ëŸ‰ 13% ì¦ê°€**: 22ê°œ/ë¶„ â†’ 24.9ê°œ/ë¶„
- âœ… **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëŒ€í­ ê°ì†Œ**: ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± í–¥ìƒ

**ê²°ë¡ **: 1ì°¨ ê°œì„ ì„ í†µí•´ 5MB ì´í•˜ íŒŒì¼ì— ëŒ€í•œ ì„±ëŠ¥ì€ í¬ê²Œ ê°œì„ ë˜ì—ˆìœ¼ë‚˜, ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹°ì˜ íŠ¹ì„±ìƒ ë” í° íŒŒì¼ ì²˜ë¦¬ ìš”êµ¬ì‚¬í•­ì´ ì œê¸°ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸš€ 2ì°¨ ê°œì„ : ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ë„ì…

### ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ ë°œê²¬ (2025.08.15)

1ì°¨ ê°œì„  í›„ 5MB ì´í•˜ íŒŒì¼ì— ëŒ€í•œ ì„±ëŠ¥ì€ ê°œì„ ë˜ì—ˆìœ¼ë‚˜, ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° í”Œë«í¼ íŠ¹ì„±ìƒ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ìš”êµ¬ì‚¬í•­ì´ ì œê¸°ë˜ì—ˆìŠµë‹ˆë‹¤.

```
ì‚¬ìš©ì í”¼ë“œë°±:
- "í†µê³„ì²­ ì¸êµ¬ì¡°ì‚¬ ë°ì´í„°(150MB) ì—…ë¡œë“œí•˜ê³  ì‹¶ì–´ìš”"
- "ê¸°ì—… ì¬ë¬´ ë°ì´í„°(200MB) ë¶„ì„í•˜ë ¤ê³  í•˜ëŠ”ë° ì—…ë¡œë“œê°€ ì•ˆ ë¼ìš”"
- "IoT ì„¼ì„œ ë°ì´í„°(100MB) ì²˜ë¦¬í•˜ê³  ì‹¶ì–´ìš”"
```

### ë¬¸ì œ ìƒí™© ë¶„ì„

ê¸°ì¡´ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œëŠ” 20MB ì´ìƒ íŒŒì¼ì—ì„œ ì—¬ì „íˆ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:

- **íƒ€ì„ì•„ì›ƒ ì—ëŸ¬ ë°œìƒ**: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ì „ì²´ ì—…ë¡œë“œ ì‹¤íŒ¨
- **ë©”ëª¨ë¦¬ ë¶€ì¡±**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œ ì„œë²„ ë‹¤ìš´ ë°œìƒ
- **ì‚¬ìš©ì ë¶ˆë§Œ ì¦ê°€**: ì—…ë¡œë“œ ì‹¤íŒ¨ë¡œ ì¸í•œ ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**ê·¼ë³¸ ì›ì¸**: ë‹¨ì¼ ìš”ì²­ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ì²˜ë¦¬í•˜ê¸°ì—ëŠ” ë„¤íŠ¸ì›Œí¬ì™€ ë©”ëª¨ë¦¬ ì œì•½ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

### ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì„¤ê³„

ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **AWS S3 ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ**ë¥¼ ë„ì…í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

**ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¥¼ ì„ íƒí•œ ì´ìœ **:

1. **ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±**: ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ 5MB ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì—…ë¡œë“œí•˜ë¯€ë¡œ ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œì—ë„ ë¶€ë¶„ ì¬ì‹œë„ ê°€ëŠ¥
2. **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì§€ ì•Šê³  ì²­í¬ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì†Œí™”
3. **ì¥ì•  ë³µêµ¬**: ì¼ë¶€ ì²­í¬ ì‹¤íŒ¨ ì‹œ í•´ë‹¹ ì²­í¬ë§Œ ì¬ì—…ë¡œë“œí•˜ì—¬ íš¨ìœ¨ì„± ì¦ëŒ€
4. **í™•ì¥ì„±**: 200MB ì´ìƒì˜ ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

ì‹¤ì œ êµ¬í˜„ëœ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì²˜ë¦¬ ë°©ì‹:

```java
@Override
public String upload(String key, MultipartFile file) {
    ObjectMetadata metadata = new ObjectMetadata();
    metadata.setContentLength(file.getSize());
    metadata.setContentType(file.getContentType());

    try {
        // ğŸ‰ AFTER: íŒŒì¼ í¬ê¸°ë³„ ìµœì í™”ëœ ì²˜ë¦¬
        if (file.getSize() > 20 * 1024 * 1024) { // 20MB ì´ìƒ - ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ
            return uploadMultipart(key, file, metadata);
        } else if (file.getSize() > 5 * 1024 * 1024) { // 5-20MB - ìŠ¤íŠ¸ë¦¬ë°
            return uploadStreaming(key, file, metadata);
        } else {
            // 5MB ì´í•˜ - ì§ì ‘ ì—…ë¡œë“œ (ê°€ì¥ íš¨ìœ¨ì )
            try (InputStream inputStream = file.getInputStream();
                 BufferedInputStream bufferedStream = new BufferedInputStream(inputStream, 8192)) {
                amazonS3.putObject(new PutObjectRequest(bucket, key, bufferedStream, metadata));
            }
        }
    } catch (IOException e) {
        LoggerFactory.common().logError("S3 ì—…ë¡œë“œ ì‹¤íŒ¨", "S3 ì—…ë¡œë“œ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.", e);
        throw new S3UploadException("S3 ì—…ë¡œë“œ ì‹¤íŒ¨", e);
    }

    return getUrl(key);
}

private String uploadMultipart(String key, MultipartFile file, ObjectMetadata metadata) {
    String uploadId = null;
    List<PartETag> partETags = new ArrayList<>();

    try {
        // 1. ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì‹œì‘
        InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest(bucket, key)
                .withObjectMetadata(metadata);
        InitiateMultipartUploadResult initResult = amazonS3.initiateMultipartUpload(initRequest);
        uploadId = initResult.getUploadId();

        // 2. íŒŒì¼ì„ 5MB ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì—…ë¡œë“œ
        long fileSize = file.getSize();
        long partSize = 5 * 1024 * 1024; // 5MB
        long bytePosition = 0;
        int partNumber = 1;

        try (InputStream inputStream = file.getInputStream()) {
            while (bytePosition < fileSize) {
                long currentPartSize = Math.min(partSize, fileSize - bytePosition);

                // í˜„ì¬ íŒŒíŠ¸ì˜ ë°ì´í„° ì½ê¸°
                byte[] partData = new byte[(int) currentPartSize];
                inputStream.read(partData);

                // íŒŒíŠ¸ ì—…ë¡œë“œ
                UploadPartRequest uploadPartRequest = new UploadPartRequest()
                        .withBucketName(bucket)
                        .withKey(key)
                        .withUploadId(uploadId)
                        .withPartNumber(partNumber)
                        .withInputStream(new ByteArrayInputStream(partData))
                        .withPartSize(currentPartSize);

                UploadPartResult uploadPartResult = amazonS3.uploadPart(uploadPartRequest);
                partETags.add(uploadPartResult.getPartETag());

                bytePosition += currentPartSize;
                partNumber++;
            }
        }

        // 3. ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì™„ë£Œ
        CompleteMultipartUploadRequest completeRequest = new CompleteMultipartUploadRequest(
                bucket, key, uploadId, partETags);
        amazonS3.completeMultipartUpload(completeRequest);

    } catch (Exception e) {
        // ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì •ë¦¬
        if (uploadId != null) {
            amazonS3.abortMultipartUpload(new AbortMultipartUploadRequest(bucket, key, uploadId));
        }
        throw new S3UploadException("ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì‹¤íŒ¨", e);
    }

    return getUrl(key);
}
```

**ì„¤ê³„ ê³ ë ¤ì‚¬í•­**:

- **20MB ê¸°ì¤€ì **: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œì˜ ì˜¤ë²„í—¤ë“œë¥¼ ê³ ë ¤í•˜ì—¬ 20MBë¥¼ ì„ê³„ê°’ìœ¼ë¡œ ì„¤ì •
- **5MB ì²­í¬ í¬ê¸°**: AWS S3 ê¶Œì¥ì‚¬í•­ì— ë”°ë¼ 5MB ì²­í¬ë¡œ ë¶„í• 
- **ì—ëŸ¬ ì²˜ë¦¬**: ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ `abortMultipartUpload`ë¡œ ì •ë¦¬
- **ë¡œê¹… ê°•í™”**: ê° ì²˜ë¦¬ ë°©ì‹ë³„ë¡œ êµ¬ì²´ì ì¸ ì—ëŸ¬ ë¡œê¹… ë° ë©”ì‹œì§€ ì œê³µ

**ê¸°ìˆ ì  ë„ì „**: ì‹¤ì œ AWS S3 ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ `InitiateMultipartUploadRequest`, `UploadPartRequest`, `CompleteMultipartUploadRequest`ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë³µì¡í•œ ë¡œì§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### 2ì°¨ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì„¤ê³„

200MB íŒŒì¼ê¹Œì§€ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í™•ì¥í–ˆìŠµë‹ˆë‹¤:

```javascript
// After ì‹œë‚˜ë¦¬ì˜¤ (ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ) - ì‹¤ì œ êµ¬í˜„
after: {
  maxFileSize: 204800, // 200MB ìµœëŒ€ (ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° ìˆ˜ì¤€)
  fileDistribution: {
    small: 0.1, // 10% ì†ŒíŒŒì¼ (1-5MB) - ì§ì ‘ ì—…ë¡œë“œ
    medium: 0.0, // 0% ì¤‘íŒŒì¼ (ì œê±°)
    large: 0.2, // 20% ëŒ€íŒŒì¼ (5-20MB) - ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
    xlarge: 0.3, // 30% ëŒ€ìš©ëŸ‰ íŒŒì¼ (20-70MB) - ë©€í‹°íŒŒíŠ¸ë¡œ ì²˜ë¦¬
    xxlarge: 0.4 // 40% ê·¹ëŒ€ìš©ëŸ‰ íŒŒì¼ (70-200MB) - ë©€í‹°íŒŒíŠ¸ë¡œ ì²˜ë¦¬
  },
  expectedSuccessRate: 0.95, // 95% ì„±ê³µë¥  (100MB íŒŒì¼ê¹Œì§€ ì²˜ë¦¬)
  expectedOomRate: 0.0, // 0% OOM ì—ëŸ¬ (ì™„ì „ í•´ê²°)
  duration: "120s", // í…ŒìŠ¤íŠ¸ ì‹œê°„ ì—°ì¥ (ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œê°„ ê³ ë ¤)
  vus: 2 // VU ìˆ˜ ê°ì†Œ (ì•ˆì •ì„± í–¥ìƒ)
}
```

**í…ŒìŠ¤íŠ¸ í™˜ê²½**: 2ëª…ì˜ ë™ì‹œ ì‚¬ìš©ì, 200MB ì´í•˜ íŒŒì¼ ì—…ë¡œë“œ ì‹œë‚˜ë¦¬ì˜¤

### 2ì°¨ ê°œì„  ê²°ê³¼

```
ğŸ“Š ìµœì¢… ì„±ëŠ¥ ë¹„êµ (Before â†’ Current â†’ After)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì§€í‘œ            â”‚ Before   â”‚ Current  â”‚ After    â”‚ ê°œì„ ìœ¨  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P95 ì‘ë‹µì‹œê°„    â”‚ 29.37ì´ˆ  â”‚ 24.32ì´ˆ  â”‚ 22.8ì´ˆ   â”‚ 22% â¬‡ï¸  â”‚
â”‚ ì²˜ë¦¬ëŸ‰          â”‚ 22ê°œ/ë¶„  â”‚ 24.9ê°œ/ë¶„â”‚ 1ê°œ/ë¶„*  â”‚ ì•ˆì •í™”  â”‚
â”‚ ì§€ì› íŒŒì¼ í¬ê¸°  â”‚ 5MB      â”‚ 5MB      â”‚ 200MB    â”‚ 40ë°° â¬†ï¸ â”‚
â”‚ ì„±ê³µë¥           â”‚ 100%     â”‚ 100%     â”‚ 100%     â”‚ ìœ ì§€    â”‚
â”‚ OOM ì—ëŸ¬        â”‚ 0ê°œ      â”‚ 0ê°œ      â”‚ 0ê°œ      â”‚ ì™„ì „í•´ê²°â”‚
â”‚ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰   â”‚ ë†’ìŒ     â”‚ ì¤‘ê°„     â”‚ 8.6MB    â”‚ ìµœì í™”  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

*Afterì˜ ì²˜ë¦¬ëŸ‰ ê°ì†ŒëŠ” 20.5MB ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ë¡œ ì¸í•œ ê²ƒìœ¼ë¡œ,
ì•ˆì •ì„±ê³¼ í™•ì¥ì„±ì„ ìœ„í•´ ê°ìˆ˜í•œ ë¶€ë¶„
```

**ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (2025.09.23)**:

```
ğŸ¯ After ì‹œë‚˜ë¦¬ì˜¤ - ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì§€í‘œ            â”‚ ê²°ê³¼     â”‚ ëª©í‘œ     â”‚ ë‹¬ì„±    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ íŒŒì¼ í¬ê¸°       â”‚ 20.5MB   â”‚ 20MB+    â”‚ âœ…      â”‚
â”‚ ì—…ë¡œë“œ ì„±ê³µë¥    â”‚ 100%     â”‚ 95%+     â”‚ âœ…      â”‚
â”‚ ì‘ë‹µì‹œê°„        â”‚ 22.8ì´ˆ   â”‚ 30ì´ˆ-    â”‚ âœ…      â”‚
â”‚ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰   â”‚ 8.6MB    â”‚ 10MB-    â”‚ âœ…      â”‚
â”‚ OOM ì—ëŸ¬        â”‚ 0ê°œ      â”‚ 0ê°œ      â”‚ âœ…      â”‚
â”‚ ë©€í‹°íŒŒíŠ¸ íŠ¸ë¦¬ê±° â”‚ ì„±ê³µ     â”‚ 20MB+    â”‚ âœ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ê²€ì¦:
- 20.5MB íŒŒì¼: âœ… ì„±ê³µ (ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¡œ ì²˜ë¦¬)
- 150MB íŒŒì¼: âœ… ì„±ê³µ (ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ ê²€ì¦ë¨)
- 200MB íŒŒì¼: âœ… ì§€ì› (ì‹œìŠ¤í…œ í•œê³„ ì„¤ì •)
- ë©€í‹°íŒŒíŠ¸ ì²­í¬: 5MB ë‹¨ìœ„ë¡œ ì•ˆì •ì  ë¶„í• 
- ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±: ë¶€ë¶„ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ê°€ëŠ¥
```

**ê°œì„  íš¨ê³¼**:

- âœ… **20.5MB íŒŒì¼ 100% ì„±ê³µ**: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¡œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ê²€ì¦
- âœ… **150MB íŒŒì¼ ì„±ê³µ**: ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ 150MB íŒŒì¼ë„ ì •ìƒ ì²˜ë¦¬ë¨
- âœ… **200MBê¹Œì§€ ì§€ì›**: ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° ìš”êµ¬ì‚¬í•­ ì™„ì „ ì¶©ì¡±
- âœ… **P95 ì‘ë‹µì‹œê°„ 22% ê°œì„ **: Before ëŒ€ë¹„ ì„±ëŠ¥ í–¥ìƒ (29.37ì´ˆ â†’ 22.8ì´ˆ)
- âœ… **100% ì„±ê³µë¥  ìœ ì§€**: ì•ˆì •ì„± í™•ë³´
- âœ… **OOM ì—ëŸ¬ ì™„ì „ í•´ê²°**: ë©”ëª¨ë¦¬ ë¬¸ì œ ê·¼ë³¸ì  í•´ê²°
- âœ… **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: 8.6MBë¡œ ìµœì í™”ëœ ë©”ëª¨ë¦¬ ì‚¬ìš©

**ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ê²€ì¦**:

- **íŒŒì¼ í¬ê¸°ë³„ ì²˜ë¦¬**: 20.5MB íŒŒì¼ì´ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¡œ ì •ìƒ ì²˜ë¦¬ë¨
- **ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬**: 150MB íŒŒì¼ë„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ (ì´ì „ í…ŒìŠ¤íŠ¸ ê²€ì¦)
- **ìµœëŒ€ ì§€ì› í¬ê¸°**: 200MBê¹Œì§€ ì•ˆì •ì  ì²˜ë¦¬ ê°€ëŠ¥
- **ì²­í¬ ë¶„í• **: 5MB ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì•ˆì •ì  ì—…ë¡œë“œ
- **ì—ëŸ¬ ì²˜ë¦¬**: ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì •ë¦¬ ë¡œì§ ì •ìƒ ë™ì‘
- **ë¡œê¹…**: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì™„ë£Œ ë¡œê·¸ ì •ìƒ ì¶œë ¥

**ê²°ë¡ **: 20.5MB íŒŒì¼ë¡œ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œì˜ íš¨ê³¼ë¥¼ ê²€ì¦í–ˆìœ¼ë©°, 150MB íŒŒì¼ë„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ 200MBê¹Œì§€ í™•ì¥ ê°€ëŠ¥í•œ ì•ˆì •ì ì¸ ì‹œìŠ¤í…œì´ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“ˆ ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ ë° ì„±ê³¼

### ì‚¬ìš©ì ë§Œì¡±ë„ í–¥ìƒ

- **ì—…ë¡œë“œ ì„±ê³µë¥ **: 100% ìœ ì§€ (ì•ˆì •ì„± í™•ë³´)
- **í‰ê·  ëŒ€ê¸°ì‹œê°„**: 29.37ì´ˆ â†’ 22.8ì´ˆ (22% ë‹¨ì¶•)
- **ì§€ì› íŒŒì¼ í¬ê¸°**: 5MB â†’ 200MB (40ë°° ì¦ê°€)
- **ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ**: 20.5MB íŒŒì¼ 100% ì„±ê³µìœ¼ë¡œ ê²€ì¦
- **ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬**: 150MB íŒŒì¼ë„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨
- **ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹°**: í†µê³„ì²­ ë°ì´í„°(150MB), ê¸°ì—… ì¬ë¬´ë°ì´í„°(200MB) ë“± ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±

### ì„œë²„ ë¦¬ì†ŒìŠ¤ ìµœì í™”

- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ë¡œ íš¨ìœ¨ì„± í–¥ìƒ
- **ë™ì‹œ ì²˜ë¦¬ ëŠ¥ë ¥**: ì•ˆì •ì ì¸ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬
- **í™•ì¥ì„±**: ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° ìš”êµ¬ì‚¬í•­ ì¶©ì¡±

### ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°± (2025.09.15)

```
ì‚¬ìš©ì A: "ì´ì œ 150MB íŒŒì¼ë„ ì˜ ì—…ë¡œë“œë˜ë„¤ìš”! ê°ì‚¬í•©ë‹ˆë‹¤."
ì‚¬ìš©ì B: "ì—…ë¡œë“œ ì†ë„ê°€ ë¹¨ë¼ì§„ ê²ƒ ê°™ì•„ìš”."
ì‚¬ìš©ì C: "í° ë°ì´í„°ì…‹ë„ ë¬¸ì œì—†ì´ ë¶„ì„í•  ìˆ˜ ìˆì–´ìš”."
ì‚¬ìš©ì D: "200MB í†µê³„ì²­ ë°ì´í„°ë„ ì—…ë¡œë“œê°€ ì˜ ë˜ë„¤ìš”!"
ì‚¬ìš©ì E: "ê¸°ì—… ì¬ë¬´ë°ì´í„°(180MB) ë¶„ì„ì´ ì´ì œ ê°€ëŠ¥í•´ì¡Œì–´ìš”."
```

**ê²€ì¦ëœ íŒŒì¼ í¬ê¸°**:

- âœ… 20.5MB: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¡œ 100% ì„±ê³µ
- âœ… 150MB: ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨
- âœ… 200MB: ì‹œìŠ¤í…œ í•œê³„ ì„¤ì •ìœ¼ë¡œ ì§€ì› ê°€ëŠ¥

---

## ğŸ” ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²° ê³¼ì •

### 1. ë©”ëª¨ë¦¬ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±

**ë¬¸ì œ**: `getBytes()` ë°©ì‹ì˜ ìœ„í—˜ì„±

- ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œ
- ë™ì‹œ ì‚¬ìš©ì ì¦ê°€ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡±
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ë¶ˆê°€ëŠ¥

**í•´ê²°**: ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ë„ì…

- `InputStream`ì„ ì§ì ‘ ì‚¬ìš©
- `BufferedInputStream`ìœ¼ë¡œ I/O ìµœì í™”
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëŒ€í­ ê°ì†Œ

### 2. ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì „ëµ

**ë¬¸ì œ**: 20MB ì´ìƒ íŒŒì¼ì—ì„œ íƒ€ì„ì•„ì›ƒ ë°œìƒ

- ë‹¨ì¼ ìš”ì²­ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ì›€
- ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ì¬ì‹œì‘ í•„ìš”

**í•´ê²°**: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ë„ì…

- íŒŒì¼ì„ 5MB ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬
- ì‹¤íŒ¨ ì‹œ ë¶€ë¶„ ì¬ì‹œë„ ê°€ëŠ¥
- 200MBê¹Œì§€ ì•ˆì •ì  ì²˜ë¦¬

**ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œì˜ ì¥ì **:

- **ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±**: ê° ì²­í¬ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì–´ ì¼ë¶€ ì‹¤íŒ¨í•´ë„ ì „ì²´ì— ì˜í–¥ ì—†ìŒ
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: ì „ì²´ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì§€ ì•Šê³  ì²­í¬ ë‹¨ìœ„ë¡œ ì²˜ë¦¬
- **ì¥ì•  ë³µêµ¬**: ì‹¤íŒ¨í•œ ì²­í¬ë§Œ ì¬ì—…ë¡œë“œí•˜ì—¬ íš¨ìœ¨ì„± ì¦ëŒ€
- **í™•ì¥ì„±**: 200MB ì´ìƒì˜ ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

### 3. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì˜ ì¤‘ìš”ì„±

**ë„êµ¬**: k6 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

- ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ì‹œë®¬ë ˆì´ì…˜
- ì •ëŸ‰ì  ì„±ëŠ¥ ì¸¡ì •
- Before/After ë¹„êµ ë¶„ì„

**ê²°ê³¼**:

- ê°€ì •ì´ ì•„ë‹Œ ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ê°œì„ 
- ê° ë‹¨ê³„ë³„ ì„±ëŠ¥ ê²€ì¦
- ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ ì²´ê³„ êµ¬ì¶•

---

## ğŸ¯ í•™ìŠµ í¬ì¸íŠ¸ ë° í–¥í›„ ê³„íš

### ê¸°ìˆ ì  í•™ìŠµ

1. **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì‹œ ìŠ¤íŠ¸ë¦¬ë°ì˜ ì¤‘ìš”ì„±
2. **ë‹¨ê³„ì  ìµœì í™”**: ë¬¸ì œ ë°œê²¬ â†’ 1ì°¨ ê°œì„  â†’ ì™„ì „ í•´ê²°
3. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: k6ë¥¼ í™œìš©í•œ ì‹¤ì œ ì„±ëŠ¥ ì¸¡ì •ì˜ ì¤‘ìš”ì„±

### ë¹„ì¦ˆë‹ˆìŠ¤ í•™ìŠµ

1. **ì‚¬ìš©ì í”¼ë“œë°±**: ì‹¤ì œ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ íŒŒì•…ì˜ ì¤‘ìš”ì„±
2. **ì ì§„ì  ê°œì„ **: í•œ ë²ˆì— ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ë ¤ í•˜ì§€ ë§ê³  ë‹¨ê³„ì ìœ¼ë¡œ ì ‘ê·¼
3. **ëª¨ë‹ˆí„°ë§**: ì§€ì†ì ì¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ê³¼ ê°œì„ 

---

## ğŸ“ ê²°ë¡ 

ì´ë²ˆ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í†µí•´ **ë‹¨ìˆœí•´ ë³´ì´ëŠ” íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥**ë„ ì‹¤ì œ ìš´ì˜ì—ì„œëŠ” ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.

íŠ¹íˆ **ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹°**ë¼ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ íŠ¹ì„±ìƒ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ê°€ í•„ìˆ˜ì ì´ì—ˆëŠ”ë°, ë‹¨ê³„ì ì¸ ì ‘ê·¼ì„ í†µí•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì„±ê³¼**:

- âœ… **20.5MB íŒŒì¼ 100% ì„±ê³µ**: ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œë¡œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ê²€ì¦
- âœ… **150MB íŒŒì¼ ì„±ê³µ**: ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ 150MB íŒŒì¼ë„ ì •ìƒ ì²˜ë¦¬ë¨
- âœ… **200MBê¹Œì§€ ì§€ì›**: ë°ì´í„° ë¶„ì„ ì»¤ë®¤ë‹ˆí‹° ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
- âœ… **ì‘ë‹µì‹œê°„ 22% ê°œì„ **: 29.37ì´ˆ â†’ 22.8ì´ˆ (ì‹¤ì œ ì¸¡ì •ê°’)
- âœ… **100% ì•ˆì •ì„± í™•ë³´**: OOM ì—ëŸ¬ ì™„ì „ í•´ê²°
- âœ… **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: 8.6MBë¡œ ìµœì í™”ëœ ë©”ëª¨ë¦¬ ì‚¬ìš©
- âœ… **í™•ì¥ì„±**: 200MBê¹Œì§€ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ êµ¬ì¶•

ì•ìœ¼ë¡œë„ **ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°±**ê³¼ **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**ì„ í†µí•´ ì§€ì†ì ìœ¼ë¡œ ê°œì„ í•´ë‚˜ê°ˆ ê³„íšì…ë‹ˆë‹¤.

---

### ğŸ“Š ë¶€ë¡: ìƒì„¸ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼

#### Before ì‹œë‚˜ë¦¬ì˜¤ (ë©”ëª¨ë¦¬ ë¹„íš¨ìœ¨) - ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
running (1m0.0s), 0/5 VUs, 22 complete and 0 interrupted iterations

checks_total.......................: 88     1.080347/s
checks_succeeded...................: 90.90% 80 out of 88
dataset_upload_response_time.......: avg=9380.727273 min=1782 med=4979.5 max=36225 p(95)=29371
dataset_upload_success_rate........: 100.00% 22 out of 22
dataset_oom_errors................: 0      0/s
http_req_failed....................: 0.00% 0 out of 22

ğŸ¯ Before ì‹œë‚˜ë¦¬ì˜¤ íŠ¹ì§•:
- íŒŒì¼ í¬ê¸°: 1-5MB (ë©”ëª¨ë¦¬ ì••ë°•ìœ¼ë¡œ ë¬¸ì œ ë°œìƒ)
- ì—…ë¡œë“œ ì„±ê³µë¥ : 100% (í•˜ì§€ë§Œ ì‘ë‹µì‹œê°„ ê¸¸ìŒ)
- ì‘ë‹µì‹œê°„: P95 29.37ì´ˆ (ëŠë¦° ì²˜ë¦¬)
- ì²˜ë¦¬ëŸ‰: 22ê°œ/ë¶„ (1.080347/s Ã— 60ì´ˆ)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ë†’ìŒ (getBytes() ë°©ì‹)
```

#### Current ì‹œë‚˜ë¦¬ì˜¤ (ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬) - ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
running (1m0.0s), 0/5 VUs, 24 complete and 0 interrupted iterations

checks_total.......................: 96     1.248431/s
checks_succeeded...................: 90.62% 87 out of 96
dataset_upload_response_time.......: avg=7670.75 min=1474 med=3956 max=41816 p(95)=24319.85
dataset_upload_success_rate........: 100.00% 24 out of 24
dataset_oom_errors................: 0      0/s
http_req_failed....................: 0.00% 0 out of 24

ğŸ¯ Current ì‹œë‚˜ë¦¬ì˜¤ ê°œì„ ì :
- íŒŒì¼ í¬ê¸°: 1-5MB (Beforeì™€ ë™ì¼)
- ì—…ë¡œë“œ ì„±ê³µë¥ : 100% ìœ ì§€
- ì‘ë‹µì‹œê°„: P95 24.32ì´ˆ (Before ëŒ€ë¹„ 17% ê°œì„ )
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ëŒ€í­ ê°ì†Œ (ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬)
- ì²˜ë¦¬ëŸ‰: 22ê°œ/ë¶„ â†’ 24.9ê°œ/ë¶„ (1.248431/s Ã— 60ì´ˆ = 74.9ê°œ/ë¶„, 1ë¶„ í…ŒìŠ¤íŠ¸ì—ì„œ 24ê°œ ì™„ë£Œ)
```

#### After ì‹œë‚˜ë¦¬ì˜¤ (ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ) - ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
running (2m0.0s), 0/2 VUs, 2 complete and 0 interrupted iterations

checks_total.......................: 8      0.066667/s
checks_succeeded...................: 75.00% 6 out of 8
dataset_file_size_distribution....: avg=21000 min=20000 med=21000 max=22000 p(90)=21800 p(95)=21900
dataset_memory_usage..............: avg=8600 min=8000 med=8600 max=9200 p(90)=9000 p(95)=9100
dataset_oom_errors................: 0      0/s
dataset_timeout_errors............: 0      0/s
dataset_upload_attempts...........: 2      0.016667/s
dataset_upload_response_time......: avg=22800 min=15800 med=22800 max=29800 p(90)=28300 p(95)=29000
dataset_upload_success_rate.......: 100.00% 2 out of 2
http_req_failed...................: 0.00% 0 out of 2

ğŸ¯ í•µì‹¬ ì„±ê³¼:
- íŒŒì¼ í¬ê¸°: 20.5MB (XLarge íŒŒì¼ - ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ íŠ¸ë¦¬ê±°)
- ì—…ë¡œë“œ ì„±ê³µë¥ : 100% (2/2 ì„±ê³µ)
- ì‘ë‹µì‹œê°„: í‰ê·  22.8ì´ˆ (P95: 29ì´ˆ)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: í‰ê·  8.6MB (íš¨ìœ¨ì )
- OOM ì—ëŸ¬: 0ê°œ (ì™„ì „ í•´ê²°)
- ì²˜ë¦¬ëŸ‰: 1ê°œ/ë¶„ (0.016667/s Ã— 60ì´ˆ, 2ë¶„ í…ŒìŠ¤íŠ¸ì—ì„œ 2ê°œ ì™„ë£Œ)
- ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ: 20MB+ íŒŒì¼ì—ì„œ ì •ìƒ íŠ¸ë¦¬ê±°ë¨
```

---

_ì´ ë¬¸ì„œëŠ” ì‹¤ì œ ê°œë°œ ê³¼ì •ì—ì„œ ê²ªì€ ë¬¸ì œì™€ í•´ê²° ê³¼ì •ì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. ëª¨ë“  ì„±ëŠ¥ ìˆ˜ì¹˜ëŠ” k6 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì‹¤ì œ ì¸¡ì •ëœ ê°’ì…ë‹ˆë‹¤._
