spring:
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL
    driver-class-name: org.h2.Driver
    username: sa
    password: ""

  # 테스트용 추가 설정
  application:
    name: dataracy-test

  # 환경 변수 대체값 설정
  jwt:
    secret: test-jwt-secret-key-for-testing-purposes-only
    redirect-onboarding: http://localhost:3000/onboarding
    redirect-base: http://localhost:3000
    register-token-expiration-time: 600000
    reset-token-expiration-time: 600000
    access-token-expiration-time: 3600000
    refresh-token-expiration-time: 1209600000

  redis:
    refresh-token-expiration-days: 14

  # OAuth2 테스트용 설정
  security:
    oauth2:
      client:
        registration:
          kakao:
            client-id: test-kakao-client-id
            client-secret: test-kakao-client-secret
            redirect-uri: http://localhost:8080/login/oauth2/code/kakao
            authorization-grant-type: authorization_code
            scope: profile_nickname,profile_image,account_email
          google:
            client-id: test-google-client-id
            client-secret: test-google-client-secret
            redirect-uri: http://localhost:8080/login/oauth2/code/google
            authorization-grant-type: authorization_code
            scope: openid,profile,email
        provider:
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth
            token-uri: https://www.googleapis.com/oauth2/v4/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false # 테스트 시 SQL 로그 비활성화
    properties:
      hibernate:
        format_sql: false
        dialect: org.hibernate.dialect.H2Dialect
        # 테스트용 추가 설정
        hbm2ddl:
          auto: create-drop
        # 엔티티 스캔 강화
        naming:
          physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
        # 테스트용 성능 최적화
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  h2:
    console:
      enabled: true

  data:
    redis:
      host: localhost
      port: 6379
      protocol: redis
      database: 0

  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      group-id: test-group
      auto-offset-reset: earliest
      # 테스트용 비활성화
      auto-startup: false
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer

logging:
  level:
    com.dataracy: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# 테스트용 설정
test:
  mock:
    enabled: true
  integration:
    timeout: 30000

# AWS/SES/SendGrid Mock 설정
aws:
  ses:
    access-key: test-access-key
    secret-key: test-secret-key
    region: ap-northeast-2
    sender: test@example.com
    expire-minutes: 10

sendgrid:
  api-key: test-sendgrid-key
  sender: test@example.com

cloud:
  aws:
    credentials:
      access-key: test-aws-access-key
      secret-key: test-aws-secret-key
    region:
      static: ap-northeast-2
    s3:
      bucket: test-bucket

default:
  profile:
    image-url: https://example.com/default-profile.png
  project:
    image-url: https://example.com/default-project.png
  dataset:
    image-url: https://example.com/default-dataset.png

# Elasticsearch 테스트용 설정
elasticsearch:
  connection:
    host: localhost
    port: 9200
    protocol: http
    ssl: false

# Swagger 테스트용 설정
swagger:
  title: Dataracy Test
  description: Dataracy 백엔드 API 테스트 문서입니다
  version: v1.2.0
  server-url: http://localhost:8080
  server-description: test server

springdoc:
  swagger-ui:
    enabled: false
  api-docs:
    enabled: false
