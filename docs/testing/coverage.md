# 📊 테스트 커버리지 가이드

## 🎯 **실무적 커버리지 정책**

### **커버리지 기준**

- **70%**: 최소 기준 (빌드 실패 방지)
- **75%**: 목표 기준 (경고 수준)
- **80%**: 이상적 기준 (장기 목표)

### **측정 대상**

- ✅ **포함**: Service, Adapter, Repository, Mapper
- ❌ **제외**: Config, DTO, VO, Entity, Enums, Exception, Application

## 🚀 **실무적 워크플로우**

### **일상 개발**

```bash
./gradlew test  # 빠른 피드백
```

### **PR 전 확인**

```bash
./test-coverage.sh  # 커버리지 확인
```

### **CI/CD 자동 검증**

- ✅ **테스트 실행**: 모든 테스트 통과
- ✅ **커버리지 리포트**: HTML/XML 생성
- ✅ **커버리지 검증**: 70% 이상 확인
- ⚠️ **경고 표시**: 75% 미달 시 경고

## 📋 **커버리지 향상 방법**

### **우선순위**

1. **핵심 비즈니스 로직** (Service Layer)
2. **예외 처리 케이스**
3. **경계값 테스트**
4. **통합 테스트**

### **피해야 할 것**

- ❌ **100% 추구** (비용 대비 효과 낮음)
- ❌ **의미 없는 테스트** 작성
- ❌ **커버리지만을 위한 테스트**

## 🛠️ **사용법**

### **로컬에서 커버리지 확인**

```bash
# 전체 커버리지 확인
./test-coverage.sh

# 또는 개별 실행
./gradlew test jacocoTestReport jacocoTestCoverageVerification
```

### **커버리지 리포트 확인**

```bash
# HTML 리포트 열기
open build/reports/jacoco/test/html/index.html

# 또는 브라우저에서 직접 열기
# build/reports/jacoco/test/html/index.html
```

## 📊 **커버리지 해석**

### **좋은 커버리지**

- **80% 이상**: 우수
- **70-79%**: 양호
- **60-69%**: 개선 필요
- **60% 미만**: 즉시 개선 필요

### **커버리지 함정**

- **높은 커버리지 ≠ 좋은 테스트**
- **품질 > 수량** 원칙 준수
- **의미 있는 테스트** 작성 우선

## 🎯 **실무 팁**

### **효율적인 테스트 작성**

1. **핵심 로직 우선**: 비즈니스 가치가 높은 코드부터
2. **예외 케이스**: 에러 처리 로직 테스트
3. **경계값**: 최소/최대값, null 케이스
4. **통합 시나리오**: 실제 사용 시나리오 기반

### **커버리지 개선 전략**

1. **점진적 개선**: 70% → 75% → 80%
2. **팀 합의**: 커버리지 기준 팀 내 합의
3. **자동화**: CI/CD에서 자동 검증
4. **리뷰**: PR 리뷰 시 커버리지 확인

## 🔧 **문제 해결**

### **커버리지 부족 시**

```bash
# 커버리지 리포트 확인
open build/reports/jacoco/test/html/index.html

# 누락된 부분 식별 후 테스트 추가
```

### **커버리지 기준 조정**

```gradle
// build.gradle에서 기준 변경
jacocoTestCoverageVerification {
    violationRules {
        rule {
            limit {
                minimum = 0.70 // 원하는 기준으로 변경
            }
        }
    }
}
```

## 📈 **성과 측정**

### **정기적 모니터링**

- **주간**: 커버리지 트렌드 확인
- **월간**: 커버리지 목표 달성도 검토
- **분기**: 커버리지 정책 재검토

### **팀 목표**

- **단기**: 70% 유지
- **중기**: 75% 달성
- **장기**: 80% 이상 달성
